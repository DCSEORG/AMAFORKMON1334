@page
@model AddExpenseModel
@{
    ViewData["Title"] = "Add Expense";
}

<h2>Add Expense</h2>

@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <script>
        showError('@Html.Raw(Model.ErrorMessage.Replace("'", "\\'"))');
    </script>
}

@if (Model.Success)
{
    <div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        ✓ Expense created successfully!
    </div>
}

<form method="post">
    <div class="form-group">
        <label for="Amount">Amount (£):</label>
        <input type="number" step="0.01" id="Amount" name="Amount" class="form-control" required />
    </div>

    <div class="form-group">
        <label for="ExpenseDate">Date:</label>
        <input type="date" id="ExpenseDate" name="ExpenseDate" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")" required />
    </div>

    <div class="form-group">
        <label for="CategoryId">Category:</label>
        <select id="CategoryId" name="CategoryId" class="form-control" required>
            <option value="">Select a category...</option>
            @foreach (var category in Model.Categories)
            {
                <option value="@category.CategoryId">@category.CategoryName</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="Description">Description:</label>
        <textarea id="Description" name="Description" class="form-control"></textarea>
    </div>

    <div style="margin-top: 20px;">
        <button type="submit" class="btn btn-primary">Submit Expense</button>
        <a href="/Index" class="btn" style="background: #6c757d; color: white; margin-left: 10px;">Cancel</a>
    </div>
</form>
